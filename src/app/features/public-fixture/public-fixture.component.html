<div class="fixture-container">
  <!-- Hero Section -->
  <section class="hero-section">
    <div class="hero-background">
      <img src="assets/wallpaper.jpg" alt="Background" class="wallpaper-image">
      <div class="hero-overlay"></div>
    </div>

    <!-- Back Button -->
    <div class="back-button-container">
      <button mat-icon-button class="back-button" (click)="goBack()" matTooltip="Volver atrás" matTooltipPosition="right">
        <mat-icon>arrow_back</mat-icon>
      </button>
    </div>

    <div class="container-fluid">
      <div class="row align-items-start">
        <!-- Left Column: Fixture Info (8 columns) -->
        <div class="col-lg-8">
          <div class="row align-items-center">
            <!-- Fixture Icon -->
            <div class="col-auto">
              <div class="fixture-icon-container">
                <mat-icon class="fixture-main-icon">calendar_month</mat-icon>
              </div>
            </div>

            <!-- Fixture Info -->
            <div class="col">
              <div class="fixture-info">
                <div class="fixture-header">
                  <h1 class="fixture-title">Fixture Completo</h1>
                  <p class="fixture-subtitle">Calendario de todos los partidos del torneo</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Stats Row -->
          <div class="row mt-3" *ngIf="hasCategoriesData">
            <div class="col-12">
              <div class="fixture-stats-compact">
                <div class="stat-item-compact">
                  <mat-icon>sports_soccer</mat-icon>
                  <div class="stat-content-compact">
                    <span class="stat-label-compact">Total Partidos</span>
                    <span class="stat-value-compact">{{ stats.total }}</span>
                  </div>
                </div>
                <div class="stat-item-compact">
                  <mat-icon>schedule</mat-icon>
                  <div class="stat-content-compact">
                    <span class="stat-label-compact">Programados</span>
                    <span class="stat-value-compact">{{ stats.upcoming }}</span>
                  </div>
                </div>
                <div class="stat-item-compact live-stat">
                  <mat-icon class="live-icon">fiber_manual_record</mat-icon>
                  <div class="stat-content-compact">
                    <span class="stat-label-compact">En Vivo</span>
                    <span class="stat-value-compact">{{ stats.live }}</span>
                  </div>
                </div>
                <div class="stat-item-compact">
                  <mat-icon>check_circle</mat-icon>
                  <div class="stat-content-compact">
                    <span class="stat-label-compact">Jugados</span>
                    <span class="stat-value-compact">{{ stats.finished }}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Right Column: Filters (4 columns) -->
        <div class="col-lg-4 hero-right-section">
          <div class="hero-right-content">
            <!-- Filters Card -->
            <mat-card class="filters-card-hero" *ngIf="hasCategoriesData">
              <mat-card-content>
                <!-- Filters Row -->
                <div class="filters-row">
                  <div class="row g-2">
                    <!-- Select de Categoría -->
                    <div class="col-12">
                      <mat-form-field appearance="outline" class="filter-select">
                        <mat-label>Categoría</mat-label>
                        <mat-select [(ngModel)]="selectedCategoryId" (selectionChange)="onCategoryChange()">
                          <mat-option *ngFor="let category of categories" [value]="category.id">
                            <mat-icon class="option-icon">category</mat-icon>
                            {{ category.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>

                    <!-- Select de Fase -->
                    <div [class]="shouldShowGroupSelect ? 'col-6' : 'col-12'">
                      <mat-form-field appearance="outline" class="filter-select">
                        <mat-label>Fase del Torneo</mat-label>
                        <mat-select [(ngModel)]="selectedPhaseId" (selectionChange)="onPhaseChange()">
                          <mat-option *ngFor="let phase of phases" [value]="phase.id">
                            <mat-icon class="option-icon">
                              {{ phase.phaseType === PhaseType.Groups ? 'groups' : 'emoji_events' }}
                            </mat-icon>
                            {{ phase.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>

                    <!-- Select de Grupo (si aplica) -->
                    <div class="col-6" *ngIf="shouldShowGroupSelect">
                      <mat-form-field appearance="outline" class="filter-select">
                        <mat-label>Grupo</mat-label>
                        <mat-select [(ngModel)]="selectedGroupId" (selectionChange)="onGroupChange()">
                          <mat-option *ngFor="let group of groups" [value]="group.id">
                            <mat-icon class="option-icon">flag</mat-icon>
                            {{ group.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                  </div>
                </div>

                <!-- Status Filter Chips -->
                <div class="status-filter-chips">
                  <span class="filter-label-chips">Estado:</span>
                  <div class="status-chips-container">
                    <mat-chip-set>
                      <mat-chip-option
                        [selected]="selectedStatus === 'all'"
                        (click)="onStatusChange('all')"
                        class="status-chip">
                        <mat-icon>list</mat-icon>
                        Todos
                      </mat-chip-option>
                      <mat-chip-option
                        [selected]="selectedStatus === 'upcoming'"
                        (click)="onStatusChange('upcoming')"
                        class="status-chip">
                        <mat-icon>schedule</mat-icon>
                        Programados
                      </mat-chip-option>
                      <mat-chip-option
                        [selected]="selectedStatus === 'live'"
                        (click)="onStatusChange('live')"
                        class="status-chip live-chip">
                        <mat-icon class="live-icon">fiber_manual_record</mat-icon>
                        En Vivo
                      </mat-chip-option>
                      <mat-chip-option
                        [selected]="selectedStatus === 'finished'"
                        (click)="onStatusChange('finished')"
                        class="status-chip">
                        <mat-icon>check_circle</mat-icon>
                        Jugados
                      </mat-chip-option>
                      <mat-chip-option
                        [selected]="selectedStatus === 'cancelled'"
                        (click)="onStatusChange('cancelled')"
                        class="status-chip">
                        <mat-icon>cancel</mat-icon>
                        Cancelados
                      </mat-chip-option>
                      <mat-chip-option
                        [selected]="selectedStatus === 'suspended'"
                        (click)="onStatusChange('suspended')"
                        class="status-chip">
                        <mat-icon>pause_circle</mat-icon>
                        Postergados
                      </mat-chip-option>
                    </mat-chip-set>
                  </div>
                </div>
              </mat-card-content>
            </mat-card>

            <!-- Mensaje cuando no hay categorías -->
            <mat-card class="filters-card-hero" *ngIf="!hasCategoriesData">
              <mat-card-content>
                <div class="no-data-message-hero">
                  <mat-icon class="info-icon-hero">info</mat-icon>
                  <h3>Información Pendiente</h3>
                  <p>El organizador del torneo aún no ha configurado las categorías y fases.</p>
                </div>
              </mat-card-content>
            </mat-card>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Loading Spinner -->
  <app-public-loading 
    [isVisible]="isLoading"
    text="Cargando fixture..."
    subtext="Organizando los partidos del torneo"
    [diameter]="50"
    [strokeWidth]="3">
  </app-public-loading>

  <!-- Mensaje cuando no hay categorías -->
  <div class="matchdays-container" *ngIf="!isLoading && !hasCategoriesData">
    <div class="empty-state">
      <mat-icon class="empty-icon">pending</mat-icon>
      <h2 style="color: white;">Información Pendiente</h2>
      <p style="color: white;">El organizador del torneo aún no ha configurado las categorías y fases.</p>
    </div>
  </div>

  <!-- Matchdays -->
  <div class="matchdays-container" *ngIf="!isLoading && hasCategoriesData">
    <div class="matchday" *ngFor="let matchday of filteredMatchdays">
      <!-- Matchday Header -->
      <div class="matchday-header">
        <div class="matchday-info">
          <mat-icon class="matchday-icon">calendar_today</mat-icon>
          <h2 class="matchday-title">{{ matchday.name }}</h2>
          <mat-chip class="matchday-date">
            {{ matchday.date ? (matchday.date | date:'dd MMM yyyy') : 'Fecha por definir' }}
          </mat-chip>
        </div>
        <div class="matchday-stats">
          <span class="matches-count">{{ matchday.matches.length }} partido(s)</span>
        </div>
      </div>

      <!-- Matches Grid -->
      <div class="container-fluid">
        <div class="matches-grid">
          <div *ngFor="let match of matchday.matches" class="col">
            <app-match-card
              [match]="match"
              (viewDetails)="onViewMatchDetails($event)"
              class="h-100">
            </app-match-card>
          </div>
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div class="empty-state" *ngIf="filteredMatchdays.length === 0">
      <mat-icon class="empty-icon">event_busy</mat-icon>
      <h2>No hay partidos</h2>
      <p>No se encontraron partidos con los filtros seleccionados</p>
      
    </div>
  </div>
</div>
