<div class="sidebar-container" [class.collapsed]="isCollapsed && !isMobile" [class.mobile]="isMobile">
  <!-- Logo Section -->
  <div class="logo-section" (click)="isCollapsed ? onToggleSidebar() : null">
    <div class="logo-content">
      <img src="assets/logo.png" alt="EasyGool Logo" class="logo">
      <div class="logo-text" *ngIf="!isCollapsed || isMobile">
        <h3>EasyGool</h3>
      </div>
    </div>

    <!-- Toggle Button -->
    <button mat-icon-button
            class="toggle-btn"
            (click)="onToggleSidebar()"
            *ngIf="!isMobile"
            [matTooltip]="isCollapsed ? 'Expandir sidebar' : 'Contraer sidebar'"
            matTooltipPosition="right">
      <mat-icon class="toggle-icon">chevron_left</mat-icon>
    </button>
  </div>

  <!-- Navigation Menu -->
  <nav class="nav-menu">
    <mat-nav-list>
      <ng-container *ngIf="userRole$ | async as userRole">
        <!-- Administrar Torneos Section - Visible para League -->
        <ng-container *ngIf="canAccessTournaments(userRole)">
          <div class="menu-section">
            <span class="section-title" *ngIf="!isCollapsed || isMobile">Administrar Torneos</span>
          </div>
          <mat-list-item
            class="nav-item"
            routerLink="/tournaments"
            routerLinkActive="active"
            [matTooltip]="isCollapsed && !isMobile ? 'Torneos' : ''"
            matTooltipPosition="right">
            <mat-icon matListItemIcon class="nav-icon">emoji_events</mat-icon>
            <span matListItemTitle class="nav-label" [class.hidden]="isCollapsed && !isMobile">Torneos</span>
          </mat-list-item>
          <mat-list-item
            class="nav-item"
            routerLink="/matches"
            routerLinkActive="active"
            [matTooltip]="isCollapsed && !isMobile ? 'Partidos' : ''"
            matTooltipPosition="right">
            <mat-icon matListItemIcon class="nav-icon">sports_soccer</mat-icon>
            <span matListItemTitle class="nav-label" [class.hidden]="isCollapsed && !isMobile">Partidos</span>
          </mat-list-item>
          <mat-list-item
            class="nav-item"
            routerLink="/stats"
            routerLinkActive="active"
            [matTooltip]="isCollapsed && !isMobile ? 'Estadísticas' : ''"
            matTooltipPosition="right">
            <mat-icon matListItemIcon class="nav-icon">analytics</mat-icon>
            <span matListItemTitle class="nav-label" [class.hidden]="isCollapsed && !isMobile">Estadísticas</span>
          </mat-list-item>
        </ng-container>

        <!-- Administrar Equipos Section - Visible para Team y Superadmin -->
        <ng-container *ngIf="canAccessTeams(userRole)">
          <div class="menu-section">
            <span class="section-title" *ngIf="!isCollapsed || isMobile">Administrar Equipos</span>
          </div>
          <mat-list-item
            class="nav-item"
            routerLink="/manager/dashboard"
            routerLinkActive="active"
            [matTooltip]="isCollapsed && !isMobile ? 'Dashboard' : ''"
            matTooltipPosition="right">
            <mat-icon matListItemIcon class="nav-icon">dashboard</mat-icon>
            <span matListItemTitle class="nav-label" [class.hidden]="isCollapsed && !isMobile">Dashboard</span>
          </mat-list-item>
          <mat-list-item
            class="nav-item"
            routerLink="/manager/team-info"
            routerLinkActive="active"
            [matTooltip]="isCollapsed && !isMobile ? 'Información del Equipo' : ''"
            matTooltipPosition="right">
            <mat-icon matListItemIcon class="nav-icon">info</mat-icon>
            <span matListItemTitle class="nav-label" [class.hidden]="isCollapsed && !isMobile">Información</span>
          </mat-list-item>
          <mat-list-item
            class="nav-item"
            routerLink="/manager/team-players"
            routerLinkActive="active"
            [matTooltip]="isCollapsed && !isMobile ? 'Gestión de Jugadores' : ''"
            matTooltipPosition="right">
            <mat-icon matListItemIcon class="nav-icon">people</mat-icon>
            <span matListItemTitle class="nav-label" [class.hidden]="isCollapsed && !isMobile">Jugadores</span>
          </mat-list-item>
          <mat-list-item
            class="nav-item"
            routerLink="/manager/team-lineup"
            routerLinkActive="active"
            [matTooltip]="isCollapsed && !isMobile ? 'Plantilla y Alineaciones' : ''"
            matTooltipPosition="right">
            <mat-icon matListItemIcon class="nav-icon">sports</mat-icon>
            <span matListItemTitle class="nav-label" [class.hidden]="isCollapsed && !isMobile">Alineaciones</span>
          </mat-list-item>
          <mat-list-item
            class="nav-item"
            routerLink="/manager/matches-calendar"
            routerLinkActive="active"
            [matTooltip]="isCollapsed && !isMobile ? 'Calendario de Partidos' : ''"
            matTooltipPosition="right">
            <mat-icon matListItemIcon class="nav-icon">event</mat-icon>
            <span matListItemTitle class="nav-label" [class.hidden]="isCollapsed && !isMobile">Calendario</span>
          </mat-list-item>
          <mat-list-item
            class="nav-item"
            routerLink="/manager/matches-history"
            routerLinkActive="active"
            [matTooltip]="isCollapsed && !isMobile ? 'Historial de Partidos' : ''"
            matTooltipPosition="right">
            <mat-icon matListItemIcon class="nav-icon">history</mat-icon>
            <span matListItemTitle class="nav-label" [class.hidden]="isCollapsed && !isMobile">Historial</span>
          </mat-list-item>
          <mat-list-item
            class="nav-item"
            routerLink="/manager/team-stats"
            routerLinkActive="active"
            [matTooltip]="isCollapsed && !isMobile ? 'Estadísticas del Equipo' : ''"
            matTooltipPosition="right">
            <mat-icon matListItemIcon class="nav-icon">analytics</mat-icon>
            <span matListItemTitle class="nav-label" [class.hidden]="isCollapsed && !isMobile">Estadísticas</span>
          </mat-list-item>
          <mat-list-item
            class="nav-item"
            routerLink="/manager/player-analysis"
            routerLinkActive="active"
            [matTooltip]="isCollapsed && !isMobile ? 'Análisis de Jugadores' : ''"
            matTooltipPosition="right">
            <mat-icon matListItemIcon class="nav-icon">person_search</mat-icon>
            <span matListItemTitle class="nav-label" [class.hidden]="isCollapsed && !isMobile">Análisis</span>
          </mat-list-item>
          <mat-list-item
            class="nav-item"
            routerLink="/settings"
            routerLinkActive="active"
            [matTooltip]="isCollapsed && !isMobile ? 'Configuración' : ''"
            matTooltipPosition="right">
            <mat-icon matListItemIcon class="nav-icon">settings</mat-icon>
            <span matListItemTitle class="nav-label" [class.hidden]="isCollapsed && !isMobile">Configuración</span>
          </mat-list-item>
        </ng-container>
      </ng-container>
    </mat-nav-list>
  </nav>

  <!-- User Section -->
  <div class="user-section" *ngIf="currentUser$ | async as user">
    <div class="user-info" *ngIf="!isCollapsed || isMobile">
      <div class="user-avatar">
        <img [src]="user.avatar || 'assets/person.jpg'" [alt]="user.firstName + ' ' + user.lastName">
      </div>
      <div class="user-details">
        <span class="user-name">{{ user.firstName }} {{ user.lastName }}</span>
      </div>
    </div>

    <!-- Logout Button -->
    <button mat-icon-button
            class="logout-btn"
            (click)="logout()"
            [matTooltip]="isCollapsed && !isMobile ? 'Cerrar sesión' : ''"
            matTooltipPosition="right">
      <mat-icon>logout</mat-icon>
      <span *ngIf="!isCollapsed || isMobile" class="logout-text">Salir</span>
    </button>
  </div>
</div>
