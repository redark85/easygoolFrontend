/* You can add global styles to this file, and also import other style files */

// @use rules must be written before any other rules
@use 'app/shared/styles/components';
@use 'bootstrap/scss/bootstrap';
@use '@angular/material/prebuilt-themes/indigo-pink.css';
@use './app/core/styles/error-styles.scss';

// Colores basados en el logo de EasyGool + Temática Futbolística
:root {
  // Colores base del logo (mantener)
  --primary-color: #1976D2; // Azul principal del logo
  --secondary-color: #4CAF50; // Verde complementario del logo
  --primary-light: #42A5F5; // Azul claro
  --primary-dark: #1565C0; // Azul oscuro
  --secondary-light: #66BB6A; // Verde claro
  --secondary-dark: #388E3C; // Verde oscuro
  --accent-color: #FF9800; // Naranja de acento
  --text-primary: #212121; // Texto principal
  --text-secondary: #757575; // Texto secundario
  --background-light: #FAFAFA; // Fondo claro
  --background-dark: #303030; // Fondo oscuro

  // Estados de torneo y elementos
  --status-active: #4CAF50; // Verde para activo
  --status-completed: #2196F3; // Azul info para completado
  --status-coming: #FF9800; // Naranja para próximo
  --status-deleted: #F44336; // Rojo para eliminado
  --status-unknown: #9E9E9E; // Gris para desconocido

  // Colores de UI comunes
  --success-color: #4CAF50; // Verde éxito
  --info-color: #2196F3; // Azul información
  --warning-color: #FF9800; // Naranja advertencia
  --error-color: #F44336; // Rojo error
  --disabled-color: #9E9E9E; // Gris deshabilitado

  // Colores de bordes y divisores
  --border-light: #E0E0E0; // Borde claro
  --border-medium: #BDBDBD; // Borde medio
  --border-dark: #757575; // Borde oscuro
  --divider-color: #E0E0E0; // Color divisor

  // Colores de fondo adicionales
  --surface-color: #FFFFFF; // Superficie blanca
  --surface-variant: #F5F5F5; // Superficie variante
  --overlay-light: rgba(0, 0, 0, 0.1); // Overlay claro
  --overlay-medium: rgba(0, 0, 0, 0.3); // Overlay medio
  --overlay-dark: rgba(0, 0, 0, 0.5); // Overlay oscuro
  --overlay-heavy: rgba(0, 0, 0, 0.7); // Overlay pesado

  // Colores específicos del sidebar
  --sidebar-bg: #2C3E50; // Fondo sidebar
  --sidebar-bg-collapsed: #34495E; // Fondo sidebar colapsado
  --sidebar-text: #FFFFFF; // Texto sidebar
  --sidebar-text-muted: rgba(255, 255, 255, 0.7); // Texto sidebar atenuado
  --sidebar-border: rgba(255, 255, 255, 0.1); // Borde sidebar
  --sidebar-hover: rgba(255, 255, 255, 0.1); // Hover sidebar
  --sidebar-active: rgba(255, 255, 255, 0.2); // Activo sidebar

  // Temática futbolística
  --field-green: #228B22; // Verde césped
  --field-green-light: #32CD32; // Verde césped claro
  --line-white: #FFFFFF; // Líneas del campo
  --goal-yellow: #FFD700; // Porterías/trofeos
  --referee-black: #2C2C2C; // Negro árbitro
  --ball-pattern: #000000; // Patrón balón
  --grass-shadow: #1F5F1F; // Sombra césped

  // Breakpoints responsivos
  --mobile: 576px;
  --tablet: 768px;
  --desktop: 992px;
  --large: 1200px;
  --xlarge: 1400px;

  // Espaciados reutilizables
  --spacing-xs: 0.25rem; // 4px
  --spacing-sm: 0.5rem; // 8px
  --spacing-md: 1rem; // 16px
  --spacing-lg: 1.5rem; // 24px
  --spacing-xl: 2rem; // 32px
  --spacing-xxl: 3rem; // 48px

  // Componentes layout
  --sidebar-width: 280px;
  --sidebar-collapsed: 60px;

  // FAB Button shared styles
  --fab-size: 56px;
  --fab-size-small: 40px;
  --header-height: 64px;
  --footer-height: 48px;

  // Bordes y sombras
  --border-radius-sm: 4px;
  --border-radius-md: 8px;
  --border-radius-lg: 12px;
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.12);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.15);

  // Transiciones
  --transition-fast: 0.15s ease-in-out;
  --transition-normal: 0.3s ease-in-out;
  --transition-slow: 0.5s ease-in-out;
}

// Global styles con colores del logo
html, body {
  height: 100%;
  margin: 0;
  font-family: Roboto, "Helvetica Neue", sans-serif;
  color: var(--text-primary);
  background-color: var(--background-light);
}

// Clases de utilidad para colores del logo
.text-primary-custom {
  color: var(--primary-color) !important;
}

.text-secondary-custom {
  color: var(--secondary-color) !important;
}

.bg-primary-custom {
  background-color: var(--primary-color) !important;
}

.bg-secondary-custom {
  background-color: var(--secondary-color) !important;
}

.border-primary-custom {
  border-color: var(--primary-color) !important;
}

.border-secondary-custom {
  border-color: var(--secondary-color) !important;
}

// Botones personalizados con colores del logo
.btn-primary-custom {
  background-color: var(--primary-color);
  border-color: var(--primary-color);
  color: white;

  &:hover {
    background-color: var(--primary-dark);
    border-color: var(--primary-dark);
  }
}

.btn-secondary-custom {
  background-color: var(--secondary-color);
  border-color: var(--secondary-color);
  color: white;

  &:hover {
    background-color: var(--secondary-dark);
    border-color: var(--secondary-dark);
  }
}

// Shared FAB Button Styles
.fab-container {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  height: var(--fab-size);
  margin-bottom: var(--spacing-lg);

  .fab-button {
    width: var(--fab-size);
    height: var(--fab-size);
    border-radius: 50%;
    background-color: var(--primary-color);
    color: white;
    border: none;
    box-shadow: var(--shadow-lg);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    cursor: pointer;

    &:hover {
      background-color: var(--primary-dark);
      transform: scale(1.1);
      box-shadow: 0 12px 28px rgba(0, 0, 0, 0.2);
    }

    &:active {
      transform: scale(0.95);
    }

    mat-icon {
      font-size: 24px;
      width: 24px;
      height: 24px;
    }

    // Small variant
    &.fab-small {
      width: var(--fab-size-small);
      height: var(--fab-size-small);

      mat-icon {
        font-size: 20px;
        width: 20px;
        height: 20px;
      }
    }
  }
}

// Fixed FAB Button (floating)
.fab-fixed {
  position: fixed !important;
  bottom: 30px;
  right: 30px;
  z-index: 1000;
  width: var(--fab-size);
  height: var(--fab-size);
  border-radius: 50%;
  background-color: var(--primary-color) !important;
  color: white;
  border: none;
  box-shadow: var(--shadow-lg);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
  cursor: pointer;

  &:hover {
    background-color: var(--primary-dark) !important;
    transform: scale(1.1);
    box-shadow: 0 12px 28px rgba(25, 118, 210, 0.4);
  }

  &:active {
    transform: scale(0.95);
  }

  mat-icon {
    font-size: 24px;
    width: 24px;
    height: 24px;
  }

  @media (max-width: 768px) {
    bottom: 20px;
    right: 20px;
  }
}

// Header with search only (no FAB)
.header-actions {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-lg);

  .header-content {
    flex: 1;
  }

  .search-actions {
    display: flex;
    align-items: center;
    justify-content: flex-end;

    .search-container {
      mat-form-field {
        width: 300px;

        @media (max-width: 768px) {
          width: 250px;
        }
      }
    }
  }

  @media (max-width: 768px) {
    flex-direction: column;
    gap: var(--spacing-md);

    .header-content {
      text-align: center;
      width: 100%;
    }

    .search-actions {
      width: 100%;
      justify-content: center;

      .search-container mat-form-field {
        width: 100%;
        max-width: 400px;
      }
    }
  }
}

// NOTA: El mixin modal-layout se ha movido a src/app/shared/styles/mixins.scss
// Para usar el mixin, importa: @use 'path/to/shared/styles/mixins.scss' as mixins;
// Y usa: @include mixins.modal-layout('container-class');

// Configuración global de diálogos - CORREGIDA
.mat-mdc-dialog-container {
  max-height: 90vh !important;
  max-width: 95vw !important;
  overflow: hidden !important;
  display: flex !important;
  flex-direction: column !important;
}

.mat-mdc-dialog-content {
  overflow-y: auto !important;
  overflow-x: hidden !important;
  flex: 1 !important;
  min-height: 0 !important;
  padding: 0 !important;
}

.mat-mdc-dialog-title {
  flex-shrink: 0 !important;
  margin: 0 !important;
}

.mat-mdc-dialog-actions {
  flex-shrink: 0 !important;
  margin-top: auto !important;
}

// Corrección completa para sidebar móvil
::ng-deep .mat-sidenav-container {
  position: relative !important;
  z-index: 1 !important;
}

::ng-deep .mat-sidenav {
  z-index: 9999 !important;
  opacity: 1 !important;
  visibility: visible !important;

  &.mat-drawer-over {
    z-index: 9999 !important;
    opacity: 1 !important;
    visibility: visible !important;
    background-color: var(--sidebar-bg) !important;
    background-image: url('../public/assets/sidebar.jpg') !important;
    background-size: cover !important;
    background-position: center !important;
  }
}

::ng-deep .mat-sidenav-backdrop {
  z-index: 9998 !important;
  background-color: var(--overlay-dark) !important;
  opacity: 1 !important;
}

::ng-deep .cdk-overlay-backdrop {
  background-color: var(--overlay-dark) !important;
  opacity: 1 !important;
}

// Eliminar cualquier filtro que cause difuminado
::ng-deep .mat-sidenav {
  filter: none !important;
  backdrop-filter: none !important;
}

// Asegurar visibilidad completa en móviles
@media (max-width: 768px) {

  .mat-mdc-dialog-container .mat-mdc-dialog-surface {
    max-height: 600px !important;
  }

  .matchday-center {
    display: none !important;
  }

  ::ng-deep .mat-sidenav {
    box-shadow: 0 8px 32px var(--overlay-medium) !important;
    border-right: none !important;
    transform: none !important;
    opacity: 1 !important;
    filter: none !important;
    backdrop-filter: none !important;
  }

  ::ng-deep .mat-sidenav-content {
    position: relative !important;
    z-index: 1 !important;
  }

  // Forzar que el backdrop no interfiera con el sidebar
  ::ng-deep .mat-sidenav-backdrop.mat-drawer-shown {
    opacity: 1 !important;
    pointer-events: auto !important;
  }

  // Corregir elementos específicos de Material Design en móvil
  ::ng-deep .mat-sidenav .sidebar-container {
    opacity: 1 !important;
    visibility: visible !important;
    color: white !important;
  }

  ::ng-deep .mat-sidenav .logo-section {
    opacity: 1 !important;
    visibility: visible !important;

    .logo-text h3 {
      color: white !important;
      opacity: 1 !important;
      visibility: visible !important;
    }

    .logo {
      opacity: 1 !important;
      visibility: visible !important;
    }
  }

  ::ng-deep .mat-sidenav .nav-menu {
    opacity: 1 !important;
    visibility: visible !important;
  }

  ::ng-deep .mat-sidenav .menu-section {
    opacity: 1 !important;
    visibility: visible !important;

    .section-title {
      color: white !important;
      opacity: 0.8 !important;
      visibility: visible !important;
    }
  }

  ::ng-deep .mat-sidenav .mat-mdc-list-item {
    opacity: 1 !important;
    visibility: visible !important;
    color: white !important;

    .mat-icon {
      color: white !important;
      opacity: 1 !important;
      visibility: visible !important;
    }

    .mat-mdc-list-item-title {
      color: white !important;
      opacity: 1 !important;
      visibility: visible !important;
    }
  }

  ::ng-deep .mat-sidenav .user-section {
    opacity: 1 !important;
    visibility: visible !important;

    .user-info {
      opacity: 1 !important;
      visibility: visible !important;

      .user-name {
        color: white !important;
        opacity: 1 !important;
        visibility: visible !important;
      }

      .user-avatar img {
        opacity: 1 !important;
        visibility: visible !important;
      }
    }

    .logout-btn {
      opacity: 1 !important;
      visibility: visible !important;
      color: white !important;

      .mat-icon {
        color: white !important;
        opacity: 1 !important;
        visibility: visible !important;
      }

      .logout-text {
        color: white !important;
        opacity: 1 !important;
        visibility: visible !important;
      }
    }
  }
}

.mat-mdc-dialog-container .mat-mdc-dialog-title + .mat-mdc-dialog-content {
  padding-top: 10px !important;
  display: contents !important;
}

.cdk-overlay-pane.mat-mdc-dialog-panel {
  max-height: 100% !important;
  height: auto !important;
}

// Estilos de modal-container movidos al mixin para mejor control

.mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background, .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background {
  border-color: var(--primary-dark) !important;
  background-color: var(--primary-dark) !important;
}

/* ==========================================================================
   ESTILOS GLOBALES PARA OVERLAYS Y MODALES - Angular Material 20
   ========================================================================== */

// Corrección para overlays de Angular Material 20
.cdk-overlay-container {
  z-index: 1000 !important;
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  pointer-events: none !important;

  // Centrado perfecto en móviles
  @media (max-width: 768px) {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
  }
}

// Backdrop del overlay principal
.cdk-overlay-backdrop {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  z-index: 999 !important;
  pointer-events: auto !important;
  transition: opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1) !important;
}

.cdk-overlay-backdrop.cdk-overlay-backdrop-showing {
  opacity: 1 !important;
  background-color: rgba(0, 0, 0, 0.32) !important;
}

// Pane del overlay
.cdk-overlay-pane {
  position: absolute !important;
  pointer-events: auto !important;
  z-index: 1000 !important;
}

// Contenedor del diálogo
.mat-mdc-dialog-container {
  z-index: 1000 !important;
  position: relative !important;
  background: white !important;
  border-radius: 12px !important;
  overflow: visible !important;
  box-shadow: 0 11px 15px -7px rgba(0, 0, 0, 0.2),
              0 24px 38px 3px rgba(0, 0, 0, 0.14),
              0 9px 46px 8px rgba(0, 0, 0, 0.12) !important;
}

// Surface del diálogo (Angular Material 20)
.mat-mdc-dialog-surface {
  background: white !important;
  border-radius: 12px !important;
  overflow: visible !important;
}

// Contenido del diálogo
.mat-mdc-dialog-content {
  overflow: visible !important;
  max-height: none !important;
}

// Datepicker popup
.mat-datepicker-popup {
  z-index: 1100 !important;
  position: absolute !important;
}

// Contenedor específico del datepicker
.mat-datepicker-content {
  position: relative !important;
}

// Overlay pane específico para datepicker
.cdk-overlay-pane[data-mat-datepicker] {
  position: absolute !important;
  max-width: none !important;
  max-height: none !important;
}

// Select panel
.mat-mdc-select-panel {
  z-index: 1101 !important;
  position: relative !important;
  max-height: 300px !important;
  overflow-y: auto !important;
}

// Backdrop específico para datepicker
.cdk-overlay-backdrop.mat-datepicker-popup-backdrop {
  z-index: 1099 !important;
  pointer-events: auto !important;
  background-color: rgba(0, 0, 0, 0.32) !important;
}

// SOLUCIÓN DEFINITIVA PARA MAT-SELECT - CONFIGURACIÓN COMPLETA
// Remover todas las configuraciones anteriores y usar una aproximación más directa

// 1. Backdrop del select - DEBE ser clickeable y transparente
.cdk-overlay-backdrop {
  // Para TODOS los backdrops, asegurar que sean clickeables
  pointer-events: auto !important;
  
  // Específicamente para mat-select
  &.mat-select-backdrop {
    background-color: transparent !important;
    z-index: 1000 !important;
  }
}

// 2. Panel del select - configuración específica
.mat-select-panel {
  z-index: 1001 !important;
  pointer-events: auto !important;
  max-height: 256px !important;
}

// 3. SOLUCIÓN CRÍTICA: Configurar el overlay pane correctamente
.cdk-overlay-pane {
  // Por defecto, el pane NO debe interceptar eventos
  pointer-events: none !important;
}

// 4. Solo elementos específicos dentro del pane deben capturar eventos
.cdk-overlay-pane .mat-select-panel,
.cdk-overlay-pane .mat-datepicker-popup,
.cdk-overlay-pane .mat-menu-panel,
.cdk-overlay-pane .mat-dialog-container {
  pointer-events: auto !important;
}

// 5. Configuración específica para el contenedor conectado
.cdk-overlay-connected-position-bounding-box {
  pointer-events: none !important;
}

// 6. Asegurar que el trigger del select funcione
.mat-select-trigger {
  pointer-events: auto !important;
}

// 7. Configuración global para mat-select
.mat-select {
  pointer-events: auto !important;
}

// Clases personalizadas para el modal de fecha/hora
.custom-backdrop {
  background-color: rgba(0, 0, 0, 0.4) !important;
  z-index: 999 !important;
}

.custom-dialog-panel {
  z-index: 1000 !important;

  .mat-mdc-dialog-container {
    background: white !important;
    border-radius: 12px !important;
    padding: 0 !important;
    overflow: visible !important;
  }
}

.mat-mdc-dialog-inner-container {
  display: block !important;
}

.modal-container {
  overflow-y: auto !important;
  display: block !important;
}

.mat-mdc-dialog-surface {
  padding: 20px !important;
}

// Configuración global de modales - EasyGool
.mat-mdc-dialog-container {
  --mdc-dialog-container-max-width: 600px !important;
  --mdc-dialog-container-max-height: 700px !important;

  // Márgenes para que no llegue hasta el tope
  margin: 20px !important;

  .mat-mdc-dialog-surface {
    max-width: 600px !important;
    width: 100% !important;
    border-radius: 12px !important;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15) !important;
    overflow: hidden !important;

    // Asegurar que el contenido no sobresalga
    .mat-mdc-dialog-content {
      border-radius: 0 !important;
      overflow-y: auto !important;
      max-height: calc(700px - 120px) !important; // Restar header y footer
    }
  }
}

// Configuración específica para viewport pequeños
@media (max-width: 768px) {

  .mat-expansion-panel-body {
    padding-left: 0 !important;
    padding-right: 0 !important;
  }

  .mat-mdc-dialog-container {
    margin: 10px auto !important;
    // Centrado perfecto en móviles
    left: auto !important;
    transform: none !important;
    position: relative !important;

    .mat-mdc-dialog-surface {
      max-height: calc(100vh - 20px) !important;
      width: calc(100vw - 20px) !important;
      max-width: calc(100vw - 20px) !important;
      padding: 0 !important;

      .mat-mdc-dialog-content {
        max-height: calc(100vh - 140px) !important;
      }
    }
  }

  // Overlay pane específico para móviles - centrado perfecto
  .cdk-overlay-pane {
    position: relative !important;
    left: auto !important;
    top: auto !important;
    transform: none !important;
    max-width: calc(100vw - 20px) !important;
    max-height: calc(100vh - 40px) !important;
    margin: 0 auto !important;
  }

  .cdk-overlay-pane.mat-mdc-dialog-panel {
    position: relative !important;
    left: auto !important;
    top: auto !important;
    transform: none !important;
    max-width: calc(100vw - 20px) !important;
    margin: 0 auto !important;
  }
}

// Asegurar que el overlay no interfiera en desktop
@media (min-width: 769px) {
  .cdk-overlay-pane {
    max-width: calc(100vw - 40px) !important;
    max-height: calc(100vh - 40px) !important;
  }

  .cdk-overlay-pane.mat-mdc-dialog-panel {
    max-width: 600px !important;
  }
}

// Excepción para datepicker - permitir posicionamiento natural
.cdk-overlay-pane:has(.mat-datepicker-popup),
.cdk-overlay-pane.mat-datepicker-popup-pane,
.cdk-overlay-pane:has(.mat-datepicker-content) {
  max-width: none !important;
  max-height: none !important;
  position: absolute !important;
  transform: none !important;
}

// Asegurar que el datepicker no sea afectado por restricciones globales
.cdk-overlay-pane .mat-datepicker-popup {
  position: relative !important;
  width: auto !important;
  height: auto !important;
}

