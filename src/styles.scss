/* You can add global styles to this file, and also import other style files */

// @use rules must be written before any other rules
@use 'app/shared/styles/components';

// Bootstrap CSS - usando @use en lugar de @import deprecated
@use 'bootstrap/scss/bootstrap';
@use '@angular/material/prebuilt-themes/indigo-pink.css';

// Colores basados en el logo de EasyGool + Temática Futbolística
:root {
  // Colores base del logo (mantener)
  --primary-color: #1976D2; // Azul principal del logo
  --secondary-color: #4CAF50; // Verde complementario del logo
  --primary-light: #42A5F5; // Azul claro
  --primary-dark: #1565C0; // Azul oscuro
  --secondary-light: #66BB6A; // Verde claro
  --secondary-dark: #388E3C; // Verde oscuro
  --accent-color: #FF9800; // Naranja de acento
  --text-primary: #212121; // Texto principal
  --text-secondary: #757575; // Texto secundario
  --background-light: #FAFAFA; // Fondo claro
  --background-dark: #303030; // Fondo oscuro

  // Estados de torneo y elementos
  --status-active: #4CAF50; // Verde para activo
  --status-completed: #2196F3; // Azul info para completado
  --status-coming: #FF9800; // Naranja para próximo
  --status-deleted: #F44336; // Rojo para eliminado
  --status-unknown: #9E9E9E; // Gris para desconocido

  // Colores de UI comunes
  --success-color: #4CAF50; // Verde éxito
  --info-color: #2196F3; // Azul información
  --warning-color: #FF9800; // Naranja advertencia
  --error-color: #F44336; // Rojo error
  --disabled-color: #9E9E9E; // Gris deshabilitado

  // Colores de bordes y divisores
  --border-light: #E0E0E0; // Borde claro
  --border-medium: #BDBDBD; // Borde medio
  --border-dark: #757575; // Borde oscuro
  --divider-color: #E0E0E0; // Color divisor

  // Colores de fondo adicionales
  --surface-color: #FFFFFF; // Superficie blanca
  --surface-variant: #F5F5F5; // Superficie variante
  --overlay-light: rgba(0, 0, 0, 0.1); // Overlay claro
  --overlay-medium: rgba(0, 0, 0, 0.3); // Overlay medio
  --overlay-dark: rgba(0, 0, 0, 0.5); // Overlay oscuro
  --overlay-heavy: rgba(0, 0, 0, 0.7); // Overlay pesado

  // Colores específicos del sidebar
  --sidebar-bg: #2C3E50; // Fondo sidebar
  --sidebar-bg-collapsed: #34495E; // Fondo sidebar colapsado
  --sidebar-text: #FFFFFF; // Texto sidebar
  --sidebar-text-muted: rgba(255, 255, 255, 0.7); // Texto sidebar atenuado
  --sidebar-border: rgba(255, 255, 255, 0.1); // Borde sidebar
  --sidebar-hover: rgba(255, 255, 255, 0.1); // Hover sidebar
  --sidebar-active: rgba(255, 255, 255, 0.2); // Activo sidebar

  // Temática futbolística
  --field-green: #228B22; // Verde césped
  --field-green-light: #32CD32; // Verde césped claro
  --line-white: #FFFFFF; // Líneas del campo
  --goal-yellow: #FFD700; // Porterías/trofeos
  --referee-black: #2C2C2C; // Negro árbitro
  --ball-pattern: #000000; // Patrón balón
  --grass-shadow: #1F5F1F; // Sombra césped

  // Breakpoints responsivos
  --mobile: 576px;
  --tablet: 768px;
  --desktop: 992px;
  --large: 1200px;
  --xlarge: 1400px;

  // Espaciados reutilizables
  --spacing-xs: 0.25rem; // 4px
  --spacing-sm: 0.5rem; // 8px
  --spacing-md: 1rem; // 16px
  --spacing-lg: 1.5rem; // 24px
  --spacing-xl: 2rem; // 32px
  --spacing-xxl: 3rem; // 48px

  // Componentes layout
  --sidebar-width: 280px;
  --sidebar-collapsed: 60px;

  // FAB Button shared styles
  --fab-size: 56px;
  --fab-size-small: 40px;
  --header-height: 64px;
  --footer-height: 48px;

  // Bordes y sombras
  --border-radius-sm: 4px;
  --border-radius-md: 8px;
  --border-radius-lg: 12px;
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.12);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.15);

  // Transiciones
  --transition-fast: 0.15s ease-in-out;
  --transition-normal: 0.3s ease-in-out;
  --transition-slow: 0.5s ease-in-out;
}

// Global styles con colores del logo
html, body {
  height: 100%;
  margin: 0;
  font-family: Roboto, "Helvetica Neue", sans-serif;
  color: var(--text-primary);
  background-color: var(--background-light);
}

// Clases de utilidad para colores del logo
.text-primary-custom {
  color: var(--primary-color) !important;
}

.text-secondary-custom {
  color: var(--secondary-color) !important;
}

.bg-primary-custom {
  background-color: var(--primary-color) !important;
}

.bg-secondary-custom {
  background-color: var(--secondary-color) !important;
}

.border-primary-custom {
  border-color: var(--primary-color) !important;
}

.border-secondary-custom {
  border-color: var(--secondary-color) !important;
}

// Botones personalizados con colores del logo
.btn-primary-custom {
  background-color: var(--primary-color);
  border-color: var(--primary-color);
  color: white;

  &:hover {
    background-color: var(--primary-dark);
    border-color: var(--primary-dark);
  }
}

.btn-secondary-custom {
  background-color: var(--secondary-color);
  border-color: var(--secondary-color);
  color: white;

  &:hover {
    background-color: var(--secondary-dark);
    border-color: var(--secondary-dark);
  }
}

// Shared FAB Button Styles
.fab-container {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  height: var(--fab-size);
  margin-bottom: var(--spacing-lg);

  .fab-button {
    width: var(--fab-size);
    height: var(--fab-size);
    border-radius: 50%;
    background-color: var(--primary-color);
    color: white;
    border: none;
    box-shadow: var(--shadow-lg);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    cursor: pointer;

    &:hover {
      background-color: var(--primary-dark);
      transform: scale(1.1);
      box-shadow: 0 12px 28px rgba(0, 0, 0, 0.2);
    }

    &:active {
      transform: scale(0.95);
    }

    mat-icon {
      font-size: 24px;
      width: 24px;
      height: 24px;
    }

    // Small variant
    &.fab-small {
      width: var(--fab-size-small);
      height: var(--fab-size-small);

      mat-icon {
        font-size: 20px;
        width: 20px;
        height: 20px;
      }
    }
  }
}

// Fixed FAB Button (floating)
.fab-fixed {
  position: fixed !important;
  bottom: 30px;
  right: 30px;
  z-index: 1000;
  width: var(--fab-size);
  height: var(--fab-size);
  border-radius: 50%;
  background-color: var(--primary-color) !important;
  color: white;
  border: none;
  box-shadow: var(--shadow-lg);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
  cursor: pointer;

  &:hover {
    background-color: var(--primary-dark) !important;
    transform: scale(1.1);
    box-shadow: 0 12px 28px rgba(25, 118, 210, 0.4);
  }

  &:active {
    transform: scale(0.95);
  }

  mat-icon {
    font-size: 24px;
    width: 24px;
    height: 24px;
  }

  @media (max-width: 768px) {
    bottom: 20px;
    right: 20px;
  }
}

// Header with search only (no FAB)
.header-actions {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-lg);

  .header-content {
    flex: 1;
  }

  .search-actions {
    display: flex;
    align-items: center;
    justify-content: flex-end;

    .search-container {
      mat-form-field {
        width: 300px;

        @media (max-width: 768px) {
          width: 250px;
        }
      }
    }
  }

  @media (max-width: 768px) {
    flex-direction: column;
    gap: var(--spacing-md);

    .header-content {
      text-align: center;
      width: 100%;
    }

    .search-actions {
      width: 100%;
      justify-content: center;

      .search-container mat-form-field {
        width: 100%;
        max-width: 400px;
      }
    }
  }
}

// Modal Layout Compartido - EasyGool con Bootstrap
@mixin modal-layout($container-class: 'modal-container') {
  .#{$container-class} {
    padding: 1.5rem;
    max-width: 650px;
    width: 100%;

    h2[mat-dialog-title] {
      margin: 0 0 1.5rem 0;
      color: var(--primary-color);
      font-weight: 600;
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      gap: 1.5rem;

      &::before {
        content: '⚽';
        font-size: 1.2rem;
        padding-top: 3px;
      }
    }

    // Bootstrap container para formularios
    .container-fluid {
      padding: 0;
      margin-bottom: 1.5rem;

      .row {
        margin-left: -0.5rem;
        margin-right: -0.5rem;

        [class*="col-"] {
          padding-left: 0.5rem;
          padding-right: 0.5rem;
        }
      }

      // Estilos para mat-form-field con Bootstrap
      mat-form-field {
        &.w-100 {
          width: 100%;
        }

        .mat-mdc-form-field-subscript-wrapper {
          margin-top: 0.5rem;
        }
      }

      // Labels para image uploaders
      .image-label {
        display: block;
        font-weight: 500;
        color: var(--text-primary);
        margin-bottom: 0.5rem;
        font-size: 0.875rem;
      }

      // Error messages
      .error-message {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--error-color);
        font-size: 0.75rem;
        margin-top: 0.5rem;

        mat-icon {
          font-size: 1rem;
          width: 1rem;
          height: 1rem;
        }
      }
    }

    // Compatibilidad con form-grid legacy (deprecated)
    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.25rem;
      margin-bottom: 1.5rem;

      .form-field-full {
        grid-column: 1 / -1;
      }

      .form-field {
        grid-column: 1 / -1;
      }

      mat-form-field {
        grid-column: 1 / -1;

        .mat-mdc-form-field-subscript-wrapper {
          margin-top: 0.5rem;
        }
      }

      @media (max-width: 768px) {
        grid-template-columns: 1fr;
        gap: 1rem;
      }
    }

    .dialog-actions {
      padding: 1.5rem 0 1.5rem 0;
      gap: 0.75rem;
      border-top: 1px solid var(--divider-color);
      margin-top: 1rem;

      button {
        min-width: 120px;
        height: 40px;
        font-weight: 500;

        &[mat-stroked-button] {
          border-color: var(--border-light);
          color: var(--text-secondary);

          &:hover:not([disabled]) {
            background: var(--surface-variant);
            border-color: var(--border-medium);
          }
        }

        &[mat-flat-button] {
          background: var(--primary-color);

          &:disabled {
            background: var(--border-light);
            color: var(--disabled-color);
          }
        }
      }

      .loading-content {
        display: flex;
        align-items: center;
        gap: 0.5rem;

        mat-progress-spinner {
          ::ng-deep .mdc-circular-progress__determinate-circle,
          ::ng-deep .mdc-circular-progress__indeterminate-circle-graphic {
            stroke: white;
          }
        }
      }
    }

    @media (max-width: 768px) {
      padding: 1rem;

      h2[mat-dialog-title] {
        font-size: 1.25rem;
        margin-bottom: 1rem;
      }

      .container-fluid {
        .row {
          margin-left: -0.25rem;
          margin-right: -0.25rem;

          [class*="col-"] {
            padding-left: 0.25rem;
            padding-right: 0.25rem;
          }
        }
      }
    }
  }
}

// Configuración global de diálogos
.mdc-dialog--open .mat-mdc-dialog-surface, .mdc-dialog--closing .mat-mdc-dialog-surface {
  transform: none;
  width: auto !important;
  max-width: 700px !important;
  min-width: 600px !important;
}

// Corrección completa para sidebar móvil
::ng-deep .mat-sidenav-container {
  position: relative !important;
  z-index: 1 !important;
}

::ng-deep .mat-sidenav {
  z-index: 9999 !important;
  opacity: 1 !important;
  visibility: visible !important;

  &.mat-drawer-over {
    z-index: 9999 !important;
    opacity: 1 !important;
    visibility: visible !important;
    background-color: var(--sidebar-bg) !important;
    background-image: url('../public/assets/sidebar.jpg') !important;
    background-size: cover !important;
    background-position: center !important;
  }
}

::ng-deep .mat-sidenav-backdrop {
  z-index: 9998 !important;
  background-color: var(--overlay-dark) !important;
  opacity: 1 !important;
}

::ng-deep .cdk-overlay-backdrop {
  background-color: var(--overlay-dark) !important;
  opacity: 1 !important;
}

// Eliminar cualquier filtro que cause difuminado
::ng-deep .mat-sidenav {
  filter: none !important;
  backdrop-filter: none !important;
}

// Asegurar visibilidad completa en móviles
@media (max-width: 768px) {
  ::ng-deep .mat-sidenav {
    box-shadow: 0 8px 32px var(--overlay-medium) !important;
    border-right: none !important;
    transform: none !important;
    opacity: 1 !important;
    filter: none !important;
    backdrop-filter: none !important;
  }

  ::ng-deep .mat-sidenav-content {
    position: relative !important;
    z-index: 1 !important;
  }

  // Forzar que el backdrop no interfiera con el sidebar
  ::ng-deep .mat-sidenav-backdrop.mat-drawer-shown {
    opacity: 1 !important;
    pointer-events: auto !important;
  }

  // Corregir elementos específicos de Material Design en móvil
  ::ng-deep .mat-sidenav .sidebar-container {
    opacity: 1 !important;
    visibility: visible !important;
    color: white !important;
  }

  ::ng-deep .mat-sidenav .logo-section {
    opacity: 1 !important;
    visibility: visible !important;

    .logo-text h3 {
      color: white !important;
      opacity: 1 !important;
      visibility: visible !important;
    }

    .logo {
      opacity: 1 !important;
      visibility: visible !important;
    }
  }

  ::ng-deep .mat-sidenav .nav-menu {
    opacity: 1 !important;
    visibility: visible !important;
  }

  ::ng-deep .mat-sidenav .menu-section {
    opacity: 1 !important;
    visibility: visible !important;

    .section-title {
      color: white !important;
      opacity: 0.8 !important;
      visibility: visible !important;
    }
  }

  ::ng-deep .mat-sidenav .mat-mdc-list-item {
    opacity: 1 !important;
    visibility: visible !important;
    color: white !important;

    .mat-icon {
      color: white !important;
      opacity: 1 !important;
      visibility: visible !important;
    }

    .mat-mdc-list-item-title {
      color: white !important;
      opacity: 1 !important;
      visibility: visible !important;
    }
  }

  ::ng-deep .mat-sidenav .user-section {
    opacity: 1 !important;
    visibility: visible !important;

    .user-info {
      opacity: 1 !important;
      visibility: visible !important;

      .user-name {
        color: white !important;
        opacity: 1 !important;
        visibility: visible !important;
      }

      .user-avatar img {
        opacity: 1 !important;
        visibility: visible !important;
      }
    }

    .logout-btn {
      opacity: 1 !important;
      visibility: visible !important;
      color: white !important;

      .mat-icon {
        color: white !important;
        opacity: 1 !important;
        visibility: visible !important;
      }

      .logout-text {
        color: white !important;
        opacity: 1 !important;
        visibility: visible !important;
      }
    }
  }
}

.mat-mdc-dialog-container .mat-mdc-dialog-title + .mat-mdc-dialog-content {
  padding-top: 10px !important;
}

.cdk-overlay-pane.mat-mdc-dialog-panel {
  max-height: 100% !important;
}
